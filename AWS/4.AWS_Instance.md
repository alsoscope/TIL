### AWS 클라우드 컴퓨팅 서비스 이용하기

AWS → 서비스 → EC2

#### EC2 (Amazon Elastic Compute Cloud)
- 사용자의 요구 사항에 따라 새로운 서버 인스턴스 확보<br>
- OS, CPU, 메모리, Storage 및 네트워크 요구사항에 맞는 인스턴스 유형을 선택<br>
- 서버 인스턴스 하나를 하나의 태그로 하여 Amazon EC2 리소스를 관리<br>
- 사용한 용량만큼 비용을 지불하는 종량제<br>
- EC2로 생성한 인스턴스는 가상 서버를 말한다. 가상 서버는 동일한 물리적 서버 상에 있으면서<br>
다른 가상 서버와 소프트웨어에 의해 격리되어 있는 물리적 서버의 일부이다.<br>
물리적 서버는 호스트 서버(Host Server)라고도 하며 그 위에서 실행되는 가상 서버는 게스트(Guest)라고 부른다.<br>
하이퍼바이저(Hypervisor)는 게스트를 서로 분리하고 하드웨어에 대한 요청을 스케쥴링하는 역할을 맡는다.
- 인스턴스 1개==독립된 가상의 컴퓨터 한 대를 이용하는 것 같은 서비스를 이용할 수 있다.

**Region 지정 → 서울**<br>
사용할 서비스가 존재하는 지역을 선택

---

__인스턴스 시작__
1. Choose AMI<br>
프리 티어 사용 가능한 운영체제 중 우분투 이미지 선택<br>
(예를 들어, 일반 PC에서 이미지 CD를 이용해 PC를 설치하는 것 같은 개념이다.)

2. Choose Insetance Type 인스턴스 유형<br>
프리티어 사용하능한 인스턴스 선택(1년동안 무료로 사용할 수 있는 1cpu, 메모리 1gb짜리 컴퓨터)

3. Configure Instance 인스턴스 구성<br>
인스턴스 세부 정보 구성 확인(1대의 컴퓨터, 인스턴스)

4. Add Storage<br>
저장장치 확인(8GB) 최대 30GB를 사용할 수 있다고 한다.

5. Tag Inatance<br>
태그 추가 예로 쓰여진 키(Name) - 값(Value)는 Webserver 인 태그를 정의. 인스턴스에 대한 설명.

6. Configure Security Group 보안 그룹 구성<br>
방화벽 설정.<br>
포트 번호를 추가해서 파일을 주고 받거나 클라이언트 접속을 허용할 수 있다.<br>
인스턴스 접근 권한과 어떤 방식의 접근을 허용할 것인지 지정할 수 있다.

  Add Rule(규칙 지정) → HTTP 지정. 원격으로 제어하기 위해.<br>
  HTTP는 웹 서버로 사용자들이 웹 브라우저를 통해 인스턴스에 접속할 수 있게 한다.<br>
  80번 포트 사용. HTTP 접속을 MyIP로 하면 자기 자신만 접속 할 수 있다.

  SSH는 리눅스/유닉스 계열 운영체제를 원격 제어할 수 있도록 설정을 허용한다. MyIP 지정.<br>
  모든 접속을 허용한다면 Anywhere. 내 IP만 접속가능하게 접근 제한을 지정한다면 MyIP로.<br>
  윈도우 인스턴스라면 기본적으로 RDP가 지정됨. 윈도우는 원격제어 방식이 다르기 때문.<br>
  원격 데스크톱 프로토콜(RDP, Remote Desktop Protocol)

![security](https://user-images.githubusercontent.com/44256670/70617999-206c7c80-1c55-11ea-8991-023b6192a268.png)

이미지 설명

인스턴스 생성 → 6. 보안 그룹 구성 또는<br>
EC2 대시보드 → 네트워크 및 보안 → 보안 그룹 → 해당 인스턴스 우클릭 → 인바운드/아웃바운드 규칙 편집<br>
에서 해당 인스턴스의 보안 정보를 확인할 수 있다. `유형 / 프로토콜 / 포트 범위 / 소스 / 설명`

방화벽 Firewall
> 위키피디아 : 미리 정의된 보안 규칙에 기반한, 들어오고 나가는(In&Outbound) 네트워크 트래픽을 모니터링하고
제어하는 네트워크 보안 시스템. 신뢰할 수 있는 내부 네트워크, 외부 네트워크(예:인터넷) 간의 장벽을 구성한다.
서로 다른 네트워크를 지나는 데이터를 허용하거나 거부하거나 검열, 수정하는 하드웨어나 소프트웨어 장치이다.

> 방화벽의 기본 역할은 신뢰 수준이 다른 네트워크 구간들 사이에 놓여서 신뢰 수준이 낮은 네트워크로부터 오는
해로운 트래픽이 신뢰 수준이 높은 네트워크로 오지 못하게 막는 것. 네트워크 관리자 입장에서 높은 신뢰도를 갖는 구간은
내부 네트워크 구간이라 하고, 낮은 신뢰도를 갖는 구간을 인터넷 구간 또는 외부 네트워크 구간이라 한다.
인터넷으로부터 내부 네트워크로의 침입을 막는 동시에 내부 네트워크에서 인터넷과 자유롭게 통신할 수 있게 한다.

> **Inbound**
  >> 외부에서 EC2로 들어오는 트래픽. 대표적으로 HTTP, HTTPS, SSH, RDP 등이 있음.<br>
  >> 내부를 향하는 것<br>
  >> 서버 내부로 들어오는 것<br>
  >> 서버 또는 네트워크 존 내부로 진입<br>
  >> 클라이언트→서버. 클라이언트가 업로드 할 때

> __Outbound__
  >> 바깥을 향하는 것<br>
  >> 서버 바깥으로 나가는 것<br>
  >> 서버 또는 네트워크 존 외부로 송출<br>
  >> 서버→클라이언트. 클라이언트가 다운로드 할 때.
  >> EC2 인스턴스에서 외부로 나가는 트래픽. EC2 인스턴스 안에서 인터넷을 사용할 경우<br>
  Outbound라 할 수 있다. 대표적으로 파일을 다운로드하거나, 외부 SSH로 접속하는 것이 있음.

**Type** : 프로토콜 형태. 크게 TCP, UDP, ICMP로 나눌 수 있다.<br>
__Port, Port Range__ : 포트 번호. TCP, UDP 프로토콜은 0~65535 사이의 포트 번호를 사용. ICMP는 포트번호를 사용하지 않음.

각 서버 어플리케이션은 고유의 포트 번호를 사용한다.

|포트||
|--|--|
|20 | FTP (data)|
|21 | FTP (제어)|
|22 | SSH |
|23 | 텔넷|
|53 | DNS|
|80 | 월드 와이드 웹 HTTP |
|443 | TLS/SSL 방식의 HTTP|

__Source / Destination__ : 연결/접속 가능한 IP 대역을 뜻함. Inbound일 경우 Source, Outbound일 경우 Destination.<br>
IP주소 하나만 지정할 수도 있고 CIDR 표기법으로 일정한 대역을 설정 할 수 있음. ex 0.0.0.0/0 <br>
**Rule** : Inbound, Outbound, Type, Port, Source/Destination을 조합한 것을 Rule이라 한다.<br>

7. Review and Launch<br>
지금까지 설정한 정보들을 확인 할 수 있다.<br>
마지막으로 Launch 버튼을 누르면 생성한 인스턴스(컴퓨터)에 접속하기 위한 비밀번호(키페어)를 설정할 수 있다.

AWS에서 가상 서버에 접근하려면 개인 키(private key)와 공개 키(public key)로 구성된 키 페어(key pair)가 필요하다.<br>
공개 키는 AWS에 업로드되어 가상 서버에 삽입되고, 개인 키는 자신이 소유하지만 안전하다.

create a new key pair 를 통해 Key pair name에 [비밀번호] 입력 → Download Key Pair 클릭하면<br>
(입력한 key pair name).pem 파일이 생성된다. (.pem 파일은 아마존에서 랜덤하게 만든 비밀번호.)<br>
그 파일의 내용이 실제 비밀번호 구성이다. 기존에 만들어 놓은 키페어가 있다면 사용해도 된다.<br>
Launch Instances를 클릭하면 인스턴스 생성이 완료된다.

pending은 작업 중. 녹색 아이콘의 running 은 컴퓨터 작업을 위한 세팅이 완료되었다는 뜻이다.<br>
이제 원격 제어 접속으로 내가 생성한 컴퓨터를 운용할 수 있다.

---

![instacne_lifecycle](https://user-images.githubusercontent.com/44256670/70622326-0b94e680-1c5f-11ea-8610-ba6243f418f5.jpg)

이미지 설명 __Instance LifeCycle__

AWS는 사용한 만큼 비용이 부과되기에 사용하지 않을 때엔 인스턴스를 중지하는 것이 효율적이다.<br>
- 인스턴스 → 인스턴스 상태<br>
시작 : 인스턴스를 시작. 비용이 부과된다(프리 티어 기간은 월 750이시간, 1년). IP가 재할당됨.<br>
중지 : 인스턴스를 중지. 비용이 부과되지 않는다.<br>
재부팅 : 인스턴스를 재부팅한다.<br>
종료 : 인스턴스를 삭제한다. (위험) Terminate.

AWS는 일정 시간이 지나면 IP주소가 바뀌므로 고정 IP주소를 설정해야 한다.<br>
IP주소가 자주 바뀌면 웹페이지 운용에 차질이 생기므로 대시보드 - 탄력적 IP 탭에서 고정 IP를 발급 받을 수 있다.<br>
하지만 고정 IP를 발급받고 사용하지 않으면 요금이 부가되므로 인스턴스에 연동시켜 요금이 부가되지 않도록 해야한다.

ref 생활코딩, https://cyberx.tistory.com/270
